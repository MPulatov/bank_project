"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[386],{7605:function(e,n,a){a(2791);var s=a(6048),t=a.n(s),i=a(184);n.Z=function(e){var n=e.pageCount,a=e.handlePageClick;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(t(),{previousLabel:"Previous",pageCount:n,marginPagesDisplayed:2,pageRangeDisplayed:3,nextLabel:"Next",onPageChange:a,containerClassName:"pagination pagination-sm justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",breakLabel:"...",previousLinkClassName:"page-link",nextLinkClassName:"page-link",disabledClassName:"paginationDisabled",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link"})})}},5386:function(e,n,a){a.r(n);var s=a(5861),t=a(885),i=a(7757),r=a.n(i),o=a(2791),c=a(8820),l=a(7605),d=a(6871),u=a(3504),m=a(577),p=(a(5462),a(1036)),h=a(6030),x=a(6196),g=a(7042),f=a(8062),j=a(3360),v=a(2591),C=a(184);n.default=function(e){var n=e.setSearch,a=e.searching,i=(0,o.useState)([]),k=(0,t.Z)(i,2),N=k[0],b=k[1],w=(0,h.v9)((function(e){return e.userLogin})).userInfo,_=(0,d.s0)(),L=(0,o.useState)(""),y=(0,t.Z)(L,2),P=y[0],Z=y[1];function A(){return I.apply(this,arguments)}function I(){return(I=(0,s.Z)(r().mark((function e(){var n,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"Bearer ".concat(w.token)}},e.next=4,x.y.get("/terminal/permission",n);case 4:a=e.sent,b(a.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),s=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,Z(s);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}(0,o.useEffect)((function(){A(),w||_("/login")}),[w,_]);var S=function(){var e=(0,s.Z)(r().mark((function e(n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e \u043e\u0431\u044c\u0435\u043a\u0442 \u0431\u0435\u0437 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f?")){e.next=4;break}return a={headers:{Authorization:"Bearer ".concat(w.token)}},e.next=4,x.y.delete("/terminal/permission/remove/".concat(n),a).then((function(){m.Am.success("C\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430!"),setTimeout((function(){A()}),1e3)})).catch((function(e){return Z(e.response.data.message)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=(0,o.useState)(0),z=(0,t.Z)(T,2),D=z[0],B=z[1],E=20*D,M=Math.ceil(N.length/20);return(0,C.jsx)(f.o,{title:"KM: \u0422\u0435\u0440\u043c\u0438\u043d\u0430\u043b Permission",children:(0,C.jsxs)(p.W2,{children:[(null===w||void 0===w?void 0:w.IsAdmin)&&(0,C.jsx)(u.rU,{to:"/permission/add",className:"d-flex justify-content-end",children:(0,C.jsx)(j.Z,{className:"box mb-3",size:"md",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041d\u043e\u0432\u044b\u0439 Terminal Permission"})}),P&&(0,C.jsx)(g.X,{variant:"danger",children:P}),(0,C.jsxs)(v.Z,{className:"box",striped:!0,bordered:!0,hover:!0,size:"sm",children:[(0,C.jsx)("thead",{className:"table-dark",children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{scope:"col",children:"ID"}),(0,C.jsx)("th",{scope:"col",children:"Transaction Code"}),(0,C.jsx)("th",{scope:"col",children:"Transaction Name"}),(0,C.jsx)("th",{scope:"col",children:"Terminal Name"}),(null===w||void 0===w?void 0:w.IsAdmin)&&(0,C.jsx)("th",{scope:"col-sm-1",children:"ACTION"})]})}),(0,C.jsx)("tbody",{children:N.filter((function(e){return""===n||e.transaction_name.toLowerCase().includes(a.toLowerCase())||e.terminal_name.toLowerCase().includes(a.toLowerCase())||e.transaction_code.toString().toLowerCase().includes(a.toString().toLowerCase())?e:void 0})).slice(E,E+20).map((function(e){return(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{scope:"row",children:e.terminal_allowed_tran_id}),(0,C.jsx)("td",{children:e.transaction_code}),(0,C.jsx)("td",{children:e.transaction_name}),(0,C.jsx)("td",{children:e.terminal_name}),(null===w||void 0===w?void 0:w.IsAdmin)&&(0,C.jsx)("td",{className:"col-sm-1",children:(0,C.jsxs)(p.PJ,{children:[(0,C.jsx)(u.rU,{to:"/permission/update/".concat(e.terminal_allowed_tran_id),children:(0,C.jsx)(c.$iz,{className:"Edit box"})}),(0,C.jsx)(c.VPh,{className:"Delete box",onClick:function(){return S(e.terminal_allowed_tran_id)}})]})})]},e.terminal_allowed_tran_id)}))})]}),(0,C.jsx)(p._p,{children:(0,C.jsx)(l.Z,{pageCount:M,handlePageClick:function(e){var n=e.selected;B(n)}})}),(0,C.jsx)(m.Ix,{})]})})}}}]);
//# sourceMappingURL=386.f483e9ee.chunk.js.map