(self.webpackChunkclient=self.webpackChunkclient||[]).push([[167],{7605:function(e,s,n){"use strict";n(2791);var t=n(6048),a=n.n(t),r=n(184);s.Z=function(e){var s=e.pageCount,n=e.handlePageClick;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a(),{previousLabel:"Previous",pageCount:s,marginPagesDisplayed:2,pageRangeDisplayed:3,nextLabel:"Next",onPageChange:n,containerClassName:"pagination pagination-sm justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",breakLabel:"...",previousLinkClassName:"page-link",nextLinkClassName:"page-link",disabledClassName:"paginationDisabled",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link"})})}},4138:function(e,s,n){"use strict";n.r(s);var t=n(5861),a=n(885),r=n(7757),i=n.n(r),l=n(2791),c=n(8820),o=n(7605),d=n(3504),u=n(577),h=(n(5462),n(1036)),p=n(6196),x=n(6030),m=n(8062),j=n(3360),f=n(2591),v=n(7042),C=n(5697),g=n(184);s.default=function(e){var s=e.setSearch,n=e.searching,r=(0,l.useState)([]),N=(0,a.Z)(r,2),b=N[0],k=N[1],L=(0,l.useState)(15),w=(0,a.Z)(L,2),I=w[0],A=w[1],E=(0,x.v9)((function(e){return e.userLogin})).userInfo,R=(0,l.useState)(""),y=(0,a.Z)(R,2),D=y[0],Z=y[1];function _(){return P.apply(this,arguments)}function P(){return(P=(0,t.Z)(i().mark((function e(){var s,n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s={headers:{Authorization:"Bearer ".concat(E.token)}},e.next=4,p.y.get("/retailers",s);case 4:n=e.sent,k(n.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,Z(t);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}(0,l.useEffect)((function(){_()}),[]);var S=function(){var e=(0,t.Z)(i().mark((function e(s){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e \u043e\u0431\u044c\u0435\u043a\u0442 \u0431\u0435\u0437 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f?")){e.next=4;break}return n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(E.token)}},e.next=4,p.y.delete("/retailers/remove/".concat(s),n).then((function(){u.Am.success("C\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430!"),setTimeout((function(){_()}),1e3)})).catch((function(e){return Z(e.response.data.message)}));case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),M=(0,l.useState)(0),z=(0,a.Z)(M,2),T=z[0],B=z[1],K="25"===I?25:"50"===I?50:"1000"===I?1e3:I,O=T*K,U=Math.ceil(b.length/K);return(0,g.jsx)(m.o,{title:"KM: Retailer",children:(0,g.jsxs)(h.W2,{children:[(null===E||void 0===E?void 0:E.IsAdmin)&&(0,g.jsxs)(h.Ot,{children:[(0,g.jsx)(C.K,{data:b,buttonLabel:"C\u043a\u0430\u0447\u0430\u0442\u044c Excel",fileName:"Ritailer_Lists",className:"btn",invisible:!1}),(0,g.jsx)(d.rU,{to:"/retailer/add",className:"box me-3",children:(0,g.jsx)(j.Z,{className:"box",size:"md",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041d\u043e\u0432\u044b\u0439 Retailer"})})]}),D&&(0,g.jsx)(v.X,{variant:"danger",children:D}),(0,g.jsxs)(f.Z,{className:"box",striped:!0,bordered:!0,hover:!0,size:"sm",children:[(0,g.jsx)("thead",{className:"table-dark",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{scope:"col",children:"ID"}),(0,g.jsx)("th",{scope:"col",children:"ADDRESS"}),(0,g.jsx)("th",{scope:"col",children:"NAME"}),(0,g.jsx)("th",{scope:"col",children:"NUMBER"}),(0,g.jsx)("th",{scope:"col",children:"ACTIVE"}),(0,g.jsx)("th",{scope:"col",children:"DESCRIPTION"}),(0,g.jsx)("th",{scope:"col",children:"EIN"}),(0,g.jsx)("th",{scope:"col",children:"INN"}),(0,g.jsx)("th",{scope:"col",children:"KM_RETAILER_ID"}),(0,g.jsx)("th",{scope:"col",children:"RNM"}),(null===E||void 0===E?void 0:E.IsAdmin)&&(0,g.jsx)("th",{scope:"col-sm-1",children:"ACTION"})]})}),(0,g.jsx)("tbody",{children:b.filter((function(e){return""===s||e.addres.toLowerCase().includes(n.toLowerCase())||e.number.toLowerCase().includes(n.toLowerCase())||e.name.toLowerCase().includes(n.toLowerCase())||e.ein.toLowerCase().includes(n.toLowerCase())||e.inn.toLowerCase().includes(n.toLowerCase())?e:void 0})).slice(O,O+K).map((function(e){return(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{scope:"row",children:e.retailer_id}),(0,g.jsx)("td",{children:e.addres}),(0,g.jsx)("td",{children:e.name}),(0,g.jsx)("td",{children:e.number}),(0,g.jsx)("td",{children:e.active.data}),(0,g.jsx)("td",{children:e.description}),(0,g.jsx)("td",{children:e.ein}),(0,g.jsx)("td",{children:e.inn}),(0,g.jsx)("td",{children:e.km_retailerid}),(0,g.jsx)("td",{children:e.rnm}),(null===E||void 0===E?void 0:E.IsAdmin)&&(0,g.jsx)("td",{className:"col-sm-1",children:(0,g.jsxs)(h.PJ,{children:[(0,g.jsx)(d.rU,{to:"/retailer/update/".concat(e.retailer_id),children:(0,g.jsx)(c.$iz,{className:"Edit box"})}),(0,g.jsx)(c.VPh,{className:"Delete box",onClick:function(){return S(e.retailer_id)}})]})})]},e.retailer_id)}))})]}),(0,g.jsxs)(h._p,{children:[(0,g.jsxs)("div",{className:"col-md-1",children:[(0,g.jsx)("label",{htmlFor:"sort",className:"form-label",children:"Rows:"}),(0,g.jsxs)("select",{id:"sort",className:"form-select","aria-label":"Disabled select example",name:"sort",onChange:function(e){return A(e.target.value)},value:I,children:[(0,g.jsx)("option",{value:15,children:"15"}),(0,g.jsx)("option",{value:25,children:"25"}),(0,g.jsx)("option",{value:50,children:"50"}),(0,g.jsx)("option",{value:1e3,children:"All"})]})]}),(0,g.jsx)(o.Z,{pageCount:U,handlePageClick:function(e){var s=e.selected;B(s)}})]}),(0,g.jsx)(u.Ix,{})]})})}},5382:function(){},1527:function(){},1219:function(){}}]);
//# sourceMappingURL=167.6b6ee7f8.chunk.js.map