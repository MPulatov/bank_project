{"version":3,"file":"static/js/167.6b6ee7f8.chunk.js","mappings":"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","sources":["components/Pagination/Pagination.jsx","pages/km_section/km_retailer/Retailers.jsx"],"sourcesContent":["import React from \"react\";\nimport ReactPaginate from \"react-paginate\";\n\nconst Pagination = ({ pageCount, handlePageClick }) => {\n  return (\n    <>\n      <ReactPaginate\n        previousLabel={\"Previous\"}\n        pageCount={pageCount}\n        marginPagesDisplayed={2}\n        pageRangeDisplayed={3}\n        nextLabel={\"Next\"}\n        onPageChange={handlePageClick}\n        containerClassName={\"pagination pagination-sm justify-content-end\"}\n        pageClassName={\"page-item\"}\n        pageLinkClassName={\"page-link\"}\n        breakLabel={\"...\"}\n        previousLinkClassName={\"page-link\"}\n        nextLinkClassName={\"page-link\"}\n        disabledClassName={\"paginationDisabled\"}\n        activeClassName={\"active\"}\n        previousClassName={\"page-item\"}\n        nextClassName={\"page-item\"}\n        breakClassName={\"page-item\"}\n        breakLinkClassName={\"page-link\"}\n      />\n    </>\n  );\n};\n\nexport default Pagination;\n","/* eslint-disable array-callback-return */\nimport React, { useState, useEffect } from \"react\";\nimport { AiOutlineDelete, AiOutlineEdit } from \"react-icons/ai\";\nimport Pagination from \"../../../components/Pagination/Pagination\";\nimport { Link } from \"react-router-dom\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport {\n  Container,\n  Paginate,\n  SmallContainer,\n  Icons,\n} from \"../../../components/Style/styledComponent/StyledComponents\";\nimport { $host } from \"../../../http\";\nimport { useSelector } from \"react-redux\";\nimport { MainScreen } from \"../../../components/MainScreen/MainScreen\";\nimport { Button, Table } from \"react-bootstrap\";\nimport { ErrorMessages } from \"../../../components/ErrorMessage\";\nimport { DownloadExcel } from \"react-excel-export\";\n\nconst Retailers = ({ setSearch, searching }) => {\n  // FETCHING DATA\n  const [Retailers, setRetailer] = useState([]);\n  const [sort, setSort] = useState(15);\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n  // const navigate = useNavigate();\n  const [error, setError] = useState(\"\");\n  // AXIOS\n  async function getRetailers() {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${userInfo.token}`,\n        },\n      };\n      const response = await $host.get(\"/retailers\", config);\n      setRetailer(response.data);\n    } catch (error) {\n      const message =\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message;\n      setError(message);\n    }\n  }\n\n  // useEffect(() => {\n  //   getRetailers();\n  //   if (!userInfo) {\n  //     navigate(\"/login\");\n  //   }\n  // }, [userInfo, navigate]);\n  useEffect(() => {\n    getRetailers();\n  }, []);\n\n  // Delete Button ---------------------------------------------------------\n  const handleDeleteContent = async (id) => {\n    if (\n      window.confirm(\n        \"Вы действительно хотите удалить это обьект без возможности восстановления?\"\n      )\n    ) {\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${userInfo.token}`,\n        },\n      };\n      await $host\n        .delete(`/retailers/remove/${id}`, config)\n        .then(() => {\n          toast.success(\"Cодержимое успешно удалена!\");\n          setTimeout(() => {\n            getRetailers();\n          }, 1000);\n        })\n        .catch((error) => setError(error.response.data.message));\n    }\n  };\n  // Pagination ---------------------------------------------------------------------\n  const [pageNumber, setPageNumber] = useState(0);\n  const PrePage =\n    sort === \"25\" ? 25 : sort === \"50\" ? 50 : sort === \"1000\" ? 1000 : sort;\n  const pagesVisited = pageNumber * PrePage;\n  const pageCount = Math.ceil(Retailers.length / PrePage);\n  const handlePageClick = ({ selected }) => {\n    setPageNumber(selected);\n  };\n\n  return (\n    <MainScreen title={\"KM: Retailer\"}>\n      <Container>\n        {userInfo?.IsAdmin && (\n          <SmallContainer>\n            <DownloadExcel\n              data={Retailers}\n              buttonLabel=\"Cкачать Excel\"\n              fileName=\"Ritailer_Lists\"\n              className=\"btn\"\n              invisible={false}\n            />\n            <Link to={\"/retailer/add\"} className=\"box me-3\">\n              <Button className=\"box\" size=\"md\">\n                Создать Новый Retailer\n              </Button>\n            </Link>\n          </SmallContainer>\n        )}\n\n        {error && <ErrorMessages variant=\"danger\">{error}</ErrorMessages>}\n        <Table className=\"box\" striped bordered hover size=\"sm\">\n          <thead className=\"table-dark\">\n            <tr>\n              <th scope=\"col\">ID</th>\n              <th scope=\"col\">ADDRESS</th>\n              <th scope=\"col\">NAME</th>\n              <th scope=\"col\">NUMBER</th>\n              <th scope=\"col\">ACTIVE</th>\n              <th scope=\"col\">DESCRIPTION</th>\n              <th scope=\"col\">EIN</th>\n              <th scope=\"col\">INN</th>\n              <th scope=\"col\">KM_RETAILER_ID</th>\n              <th scope=\"col\">RNM</th>\n              {userInfo?.IsAdmin && <th scope=\"col-sm-1\">ACTION</th>}\n            </tr>\n          </thead>\n          <tbody>\n            {Retailers.filter((item) => {\n              if (setSearch === \"\") {\n                return item;\n              } else if (\n                item.addres.toLowerCase().includes(searching.toLowerCase()) ||\n                item.number.toLowerCase().includes(searching.toLowerCase()) ||\n                item.name.toLowerCase().includes(searching.toLowerCase()) ||\n                item.ein.toLowerCase().includes(searching.toLowerCase()) ||\n                item.inn.toLowerCase().includes(searching.toLowerCase())\n              ) {\n                return item;\n              }\n            })\n              .slice(pagesVisited, pagesVisited + PrePage)\n              .map((item) => (\n                <tr key={item.retailer_id}>\n                  <th scope=\"row\">{item.retailer_id}</th>\n                  <td>{item.addres}</td>\n                  <td>{item.name}</td>\n                  <td>{item.number}</td>\n                  <td>{item.active.data}</td>\n                  <td>{item.description}</td>\n                  <td>{item.ein}</td>\n                  <td>{item.inn}</td>\n                  <td>{item.km_retailerid}</td>\n                  <td>{item.rnm}</td>\n                  {userInfo?.IsAdmin && (\n                    <td className=\"col-sm-1\">\n                      <Icons>\n                        <Link to={`/retailer/update/${item.retailer_id}`}>\n                          <AiOutlineEdit className=\"Edit box\" />\n                        </Link>\n                        <AiOutlineDelete\n                          className=\"Delete box\"\n                          onClick={() => handleDeleteContent(item.retailer_id)}\n                        />\n                      </Icons>\n                    </td>\n                  )}\n                </tr>\n              ))}\n          </tbody>\n        </Table>\n        <Paginate>\n          <div className=\"col-md-1\">\n            <label htmlFor=\"sort\" className=\"form-label\">\n              Rows:\n            </label>\n            <select\n              id=\"sort\"\n              className=\"form-select\"\n              aria-label=\"Disabled select example\"\n              name=\"sort\"\n              onChange={(e) => setSort(e.target.value)}\n              value={sort}\n            >\n              <option value={15}>15</option>\n              <option value={25}>25</option>\n              <option value={50}>50</option>\n              <option value={1000}>All</option>\n            </select>\n          </div>\n          <Pagination pageCount={pageCount} handlePageClick={handlePageClick} />\n        </Paginate>\n        <ToastContainer />\n      </Container>\n    </MainScreen>\n  );\n};\n\nexport default Retailers;\n"],"names":["pageCount","handlePageClick","previousLabel","marginPagesDisplayed","pageRangeDisplayed","nextLabel","onPageChange","containerClassName","pageClassName","pageLinkClassName","breakLabel","previousLinkClassName","nextLinkClassName","disabledClassName","activeClassName","previousClassName","nextClassName","breakClassName","breakLinkClassName","setSearch","searching","useState","Retailers","setRetailer","sort","setSort","userInfo","useSelector","state","userLogin","error","setError","getRetailers","config","headers","Authorization","token","$host","response","data","message","useEffect","handleDeleteContent","id","window","confirm","then","toast","setTimeout","catch","pageNumber","setPageNumber","PrePage","pagesVisited","Math","ceil","length","title","IsAdmin","buttonLabel","fileName","className","invisible","to","size","variant","striped","bordered","hover","scope","filter","item","addres","toLowerCase","includes","number","name","ein","inn","slice","map","retailer_id","active","description","km_retailerid","rnm","onClick","htmlFor","onChange","e","target","value","selected"],"sourceRoot":""}